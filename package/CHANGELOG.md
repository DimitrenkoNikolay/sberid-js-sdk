# Change Log
## [3.6.1] - 8.04.2024
### Что нового:
- Обновление настроек clickstream

## [3.6.0] - 15.01.2024
### Что нового:
- В баннере добавлено отображение оферты, с возможностью дополнения текста оферты

## [3.5.0] - 15.10.2023
### Что нового:
- Изменения событий для метрик

## [3.4.1] - 29.09.2023
### Что нового:
- Редизайн кнопок
- Отключена возможность кастомизации текста на кнопке входа
- Обновлен метод logout для отключения автовхода
- Удалены настройки размера кнопки через buttonProps.size(для изменения размера кнопки необходимо подключать дополнительные стили из дистрибутива @sberid/js-sdk

### Исправлено:
- Формирование ссылки в баннере, если настройка mweb2app: false
- Автоматическое открытие баннера, если настройка personalization: false
- Поведение лоадера при возврате назад
- Возможность клика по кнопке в состоянии загрузки

## [3.3.*] - 30.07.2023
### Добавлено:
- [3.3.3] Поддержка typeScript версии 3 и 2( skipLibCheck: true )
 - Редизайн баннера

 ### Исправлено:
- [3.3.1] Исправлено генерация ссылки для mweb2app: true
- [3.3.1] Исправлено ошибка сертификата при обращении к `sberid/BlackList/Button/No_Button.json`
- [3.3.2] Исправлено установка параметра deeplink.allowSberIDRedirects

## [3.2.0] - 30.06.2023
### Добавлено:
- **onPersonalizationStatus** _(Function)_ - функция обратного вызова при завершении операции персонализации, параметр personalization говорит о статусе операции, если true то кнопка успешно персонализирована, иначе нет
- **fastLogin.onErrorAutoMode** _(Function)_ - функция обратного вызова при не успехе выполнения автоматического входа
- **fastLogin.onErrorDefaultMode** _(Function)_ - функция обратного вызова при не успехе выполнения быстрого входа, если возвращает _true_ то SDK пытается продолжить вход другим способом, если _false_ вход прерывается
- **SberidSDK.getUrl**_(Function)_ - статичный метод класса SberidSDK позволяет получить ссылку для входа по СберId, метод возвращает Promise c объектом {link, deeplink} 
- **sendErrorAuth** _(Function)_ - метод экземпляра SberidSDK позволяющий отправить сообщение о неудачном входе в метрики СберId, рекомендуемое значение для передачи тип ошибки и мета информация в формате строки  

### Исправлено:
- учет параметров universalLink.deeplinkUrl и universalLink.oidcParams
- сообщение о CORS ошибке при запросе /sberid/BlackList/Button/No_Button.json

## [3.1.3] - 27.03.2023

### Исправлено:
- исправлен быстрый вход для партнеров на cloud

## [3.1.2] - 15.03.2023

### Исправлено:
- вызов не корректного url быстрого входа по ЕСА 

## [3.1.1] - 03.03.2023

### Исправлено:
- учет параметров universalLink.baseUrl и universalLink.universalLinkUrl

## [3.1.0] - 22.02.2023

### Добавлено:
- настройки входов через id.sber.ru(Cloud)
- отправка новых событий в систему сбора метрик
- отправка событий в систему сбора метрик теперь по умолчанию включена
- предупреждения в консоль браузера о не корректных настройках 
- банер с инструкцией в случае перехода на сертификаты Минцифры 

### Исправлено:
- ложное срабатывания автоподогева куки пользователя
- размер окна авторизации под содержимое формы входа по QR

## [3.0.8] - 01.09.2022

### Добавлено

- Метод передачи информации о входе на партнёра не по СберID
- Кеширование чёрного списка
- Исправлено поведение инициализации SDK, вернули возможность синхронного использования

## [3.0.7] - 04.07.2022

### Добавлено

-   Метод logout позволяющий запомнить, что пользователь произвел выход, данный метод необходимо использовать в связке с функционалом авто-входа

## [3.0.6] - 21.06.2022

### Добавлено

-   Функционал автоподогрева авторизационной куки, который можно активировать по настройке autoUpdateCookie

## [3.0.5] - 19.05.2022

### Исправлено

-   Происходила ошибка инициализации SberVisor при ssr из-за отсутствия window

## [3.0.4] - 27.04.2022

### Изменено

-   Поддержка отключения входа по чёрным спискам

## [3.0.3] - 15.03.2022

### Исправлено

-   Ошибка _getBrowserVersion().split_ при отсутсвии версии в UserAgent
-   [fix](https://github.com/SberID/js-sdk/issues/4) Расположение модального окна SDK не по центру экрана в Firefox
-   Убраны пустые ключи при отправке событий в SberVisor

### Изменено

-   Версия SberVisor обновлена до 1.5.2

## [3.0.2] - 20.12.2021

### Исправлено

-   Для мобильного браузера **Safari** всегда возращалась обычная ссылка вместо универсальной
-   В параметре **scope** разделитель _+_ не заменялся на _пробел_

## [3.0.1] - 23.11.2021

### Изменено

-   Название пакета изменено на **@sberid/js-sdk**
-   Обновлены примеры

### Исправлено

-   Не учитывалось состояние **disabled** в обработчике click по кнопке
-   Стили **disabled** для кнопки
-   Не учитывался параметр loader в SberidButtonProps

## [3.0.0] - 11.11.2021

### Изменено

-   Название пакета изменено на **sberid-js-sdk**
-   Старые примеры удалены. Вместо них добавлен пример работы с SDK на основе приложения созданного через [Create React App](https://github.com/facebook/create-react-app).
-   Лицензия изменена на **Sber Public License at-nc-sa v.2**
-   Листенеры для открытого окна авторизации по Сбер ID теперь вызываются только при создание окна и удаляются после успешного входа или закрытии окна

### Добавлено

-   Метод **removeEventListener()** для удаления листенера _message_ при открытии окна авторизации по Сбер ID
-   Отправка параметра _personalization_ в событие клика на кнопку входа по Сбер ID

## [3.0.0-rc.1] - 01.10.2021

### Изменено

-   Функционал deeplink отключен по умолчанию

### Исправлено

-   Исправлены условия для отключения формирования универсальных ссылок.

## [3.0.0-rc.0] - 01.09.2021

-   Обновлен тех. стек. Добавлена поддержка ESM модулей.

### Добавлено

-   Работа с универсальными ссылками теперь является модулем SDK
-   Получение информации о пользователе без инициализации SDK
-   Типизация для работы в проектах написанных на TypeScript
-   Кастомизация стилей через CSS-переменные
-   Возможность создания кнопки после инициализации SDK
-   Фирменные шрифты SB Sans включены в сборку SDK

### Изменено

-   Удалено свойство **theme** для стилизации кнопок. Вместо него добавлено новое свойство **buttonProps**
-   Удалено свойство **selector**
-   Свойство **container** вместо название класса принимает селектор или HTMLElement
-   Обновлены примеры работы с SDK
-   Вместо генерации inline-стилей в JS все стили вынесены в файлы css. Для корректного отображения стилей необходимо подключить в проект соответствующие файлы

## [2.3.2] - 06.07.2021

### Добавлено

-   Функционал смены пользователя при наличие персонализированной кнопки
-   Обработка диплинков в сценарии app2webview

### Исправлено

-   Нескольких нажатий на кнопку Войти по Сбер ID

## [2.3.1] - 18.06.2021

### Добавлено

-   Проксирование параметров **authApp** и **app_redirect_uri** в запрос к Сбер ID
-   Возможность отключать запуск универсальной ссылки GET параметром **is_universal_link**
-   Подставка в запрос к Сбер ID utm-меток переданных при вызове сайта партнера
-   Новые настройки расположения персонализированного баннера

### Изменено

-   Обновлена версия Sberbank Analytics до 1.40

## [2.3.0] - 16.05.2021

### Добавлено

-   Добавлена функционал быстрого входа

### Изменено

-   Версия скрипта для формирования универсальных ссылок обновлена до 1.0.7

## [2.2.1] - 08.04.2021

### Добавлено

-   В поле **container** можно передавать значения вида _HTMLDivElement_

### Исправлено

-   Корректная отправка метрик в Sberbank Analytics при клике на перс. баннер

## [2.2.0] - 25.01.2021

### Добавлено

-   Персонализированный баннер

## [2.1.0] - 26.10.2020

### Добавлено

-   Функционал персонализированной кнопки

## [2.0.0] - 15.10.2020

### Изменено

-   Ребрендинг

## [1.0.4] - 18.08.2020

### Исправлено

-   Лишняя генерация **state** при возврате на страницу успеха партнера

## [1.0.3] - 18.05.2020

### Изменено

-   Версия скрипта для формирования универсальных ссылок обновлена до 1.0.5

### Исправлено

-   Баг в **successWindowListener** при открытии страницы через target="\_blank"
-   Двойной знак **??** при формировании ссылки

## [1.0.2] - 16.04.2020

### Добавлено

-   Добавлена поддержка Sberbank Analytics

### Изменено

-   Версия скрипта для формирования универсальных ссылок обновлена до 1.0.

### Исправлено

-   Работа скрипта в браузере Internet Explorer
-   Мелкие баги в работе SDK

## [1.0.1] - 10.04.2020

### Добавлено

-   Лицензия

### Изменено

-   Документация по использованию SDK

## [1.0.0] - 16.03.2020

### Добавлено

-   Javascript SDK для Партнеров Сбер ID
